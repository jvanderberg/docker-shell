# Docker Shell

This is a simple docker configuration designed to create a nice shell account with a persistent /home/username directory mapped from a docker named volume.

# Configuration

Run:

./build.sh

And enter your username. This will create the user in the container and create/map a named volume to /home/username in the container.

This process also generates a docker-compose.yml.

Re-run build.sh if you make any changes to the docker file.

# Launching the shell

Run:

./shell.sh

This will use the docker-cli to launch a fish shell inside the container.

# Directory mapping

The following directories are mapped into the container:

1. ~:/home
2. ${PWD}/backup:/backup
3. username_home:/home/username

#1 is your host's home directory. #2 is a backup directory (see 'Backing Up' below). #3 is the contents of the named volume.

If you want to add more, edit the command line in shell.sh.

# Backing up the home directory

Inside the container run /backup/backup.sh, this will tar the home directory and place it in /backup/home.tgx. As /backup is mapped in from this project's backup directory, you now have a convenient backup of the home directory on the host system.

# Docker in Docker

The docker cli is installed in the container, and has been mapped to use the host's docker backend.

You can run docker commands using:

sudo docker command [options]

# Using VSCode to edit name volume contents

First run the build step above, then open this directory in VSCode. Next use the VSCode command 'Reopen in Container' to launch the special docker config contained in the docker-compose.yml the build step generated.

You will see a home/username directory in the workspace folder. This contains the contents of the named volume generated by the build step.

The terminal will also run inside the container, though defaults to bash.

# SSH keys

The keys in the container at /home/username/.ssh will be used. Either generate new keys for the container, or copy them from /home/.ssh.

# Installing new software

If you want to just try something out you can use:

sudo apt-get install package

This will not persist between sessions.

To install software persistently, add a new line to the Dockerfile:

RUN apt-get -y install

Then re-run build.sh

